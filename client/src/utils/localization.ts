export type Lang = 'zh' | 'en';

export const TEXTS = {
    zh: {
        title: "IOTA TRPGï¼šé€ƒé›¢è¡€æ±—è¾¦å…¬å¤§æ¨“",
        subtitle: "åŸºæ–¼ IOTA å€å¡Šéˆçš„ç„¡é™åŠ ç­æ¨¡æ“¬å™¨",
        recruit_btn: "+ æ‹›å‹Ÿæ–°ç¤¾ç•œ",
        list_title: "ğŸ‘¥ å“¡å·¥åå–®",
        status_mad: "ğŸ’€ éå‹æ­»",
        status_sane: "SANå€¼",
        
        // UI
        demo_section: "ğŸ› ï¸ æ¼”ç¤º / å£“åŠ›æ¸¬è©¦", 
        exploration_section: "ğŸ”¦ æ¢ç´¢è¡Œå‹•",
        career_end: "ğŸšª è·æ¶¯çµ‚é»",
        act_resign_btn: "ğŸ’” æäº¤é›¢è·ç”³è«‹ (éŠ·æ¯€NFT)",

        act_check: "ğŸ² å–®æ¬¡æª¢å®š",
        act_batch: "ğŸ”¥ ç˜‹ç‹‚é€£ç™¼ (x3)",
        act_quick: "âš¡ å¿«é€Ÿé€šé—œ",
        act_quick_desc: "è‡ªå‹•åŸ·è¡Œ (é©åˆåˆ·å¯¶)",
        act_manual: "ğŸ–ï¸ æ²‰æµ¸é«”é©—",
        act_manual_desc: "æ‰‹å‹•æ±ºç­– (RPæ¨¡å¼)",
        
        choice_run: "ğŸƒ é€ƒè·‘ (DEX)",
        choice_hide: "ğŸ«£ èº²è— (LUK)",
        choice_gaze: "ğŸ‘ï¸ å‡è¦– (POW)",
        warn_loop: "âš ï¸ è¼ªè¿´ä¹‹ä¸­... è«‹é¸æ“‡",
        history_title: "å†’éšªå±¥æ­·",
        rank_title: "ğŸ† è¼ªè¿´æ’è¡Œæ¦œ (æœ€æ·±å±¤æ•¸)",

        claim_btn: "é ˜å–åŠ ç­è²»",
        claim_error: "ğŸš« ç³»çµ±éŒ¯èª¤ï¼šå…¬å¸è²¡å‹™ç‹€æ³ä¸ä½³ï¼Œæš«åœå‡ºé‡‘ã€‚",

        cert_title: "é›¢è·è­‰æ˜æ›¸",
        cert_content: "èŒ²è­‰æ˜å“¡å·¥",
        cert_content2: "æ–¼ç„¡é™è¿´å»Šä»»è·æœŸé–“ï¼Œé›–é£½å—ç²¾ç¥æŠ˜ç£¨ä½†ä»å‹‰å¼·å€–å­˜ã€‚",
        cert_stat_depth: "æœ€çµ‚æ·±åº¦",
        cert_stat_mist: "ç´¯ç© MIST",
        cert_stamp: "å‡†äºˆé›¢è·",
        cert_dept: "IOTA äººè³‡éƒ¨",
        cert_close: "æ”¶ä¸‹è­‰æ›¸ (é—œé–‰)",
        
        intro_lines: [
            "ä½ æ˜¯ä¸€åå¯æ†åŠ ç­çš„ç¤¾ç•œï¼Œä¸çŸ¥ä¸è¦ºå·²ç¶“åˆ°æ·±å¤œ......",
            "ç•¶ä½ å›éç¥æ™‚ï¼Œå…¬å¸å·²ç¶“åœé›»ã€‚",
            "é›»æ¢¯æ¯«ç„¡åæ‡‰ï¼Œä½ åªå¥½æ¨é–‹åšé‡çš„å®‰å…¨é–€ï¼Œèµ°å‘æœ‰ç¶ è‰²é€ƒç”Ÿæ¨™èªŒçš„æ¨“æ¢¯é–“ã€‚",
            "è§’è½æ•£è½è‘—ä¸€äº›éºè½çš„æ–¹å½¢è–„æ¬¾åŒ…è£è¢‹ã€‚",
            "ç°å¡µå‘³å¾ˆé‡ï¼Œä½ å¿ä¸ä½æ‰“äº†ä¸€å€‹å™´åšâ€”â€”",
            "ã€Œå“ˆå•¾ï¼ã€",
            "......å˜©å•¦ã€‚",
            "èº«å¾Œçš„é˜²ç«é–€é‡é‡åœ°é—œä¸Šäº†ã€‚",
            "å› ç‚ºå¤ªéæ˜æš—ï¼Œä½ å·²ç¶“æ‰¾ä¸åˆ°åŸæœ¬çš„é–€æŠŠæ‰‹ã€‚",
            "åªå¥½ç¹¼çºŒå¾€ä¸‹èµ°ã€‚",
            "ä½†æœ‰ä¸€ç¨®ä¸ç¥¥çš„é æ„Ÿï¼Œæ­£åƒå¢¨æ°´èˆ¬åœ¨ä½ å¿ƒåº•è”“å»¶......"
        ],
        outro_madness: [
            "ä½ çš„æ„è­˜é–‹å§‹æ¨¡ç³Š...",
            "æ¨“æ¢¯é–“çš„ç‰†å£é–‹å§‹è •å‹•ï¼Œè®Šæˆäº†è€é—†çš„è‡‰ã€‚",
            "ã€Œæ˜å¤©è¨˜å¾—ææ—©ä¾†é–‹æœƒ...ã€",
            "ä½ æ”¾æ£„äº†æ€è€ƒã€‚",
            "ä½ æˆç‚ºäº†é€™æ£Ÿå¤§æ¨“çµæ§‹çš„ä¸€éƒ¨åˆ†ã€‚",
            "æ°¸é ã€‚"
        ],
        outro_escaped: [
            "æ–°é®®çš„ç©ºæ°£ï¼",
            "ä½ æ¨é–‹äº†ä¸€æ¨“çš„å¤§é–€ï¼Œè­¦è¡›é©šè¨åœ°çœ‹è‘—ä½ ã€‚",
            "è·¯ç‡ˆæ˜é»ƒï¼Œä½†è‡³å°‘æ˜¯çœŸå¯¦çš„ã€‚",
            "ä½ å›é ­çœ‹äº†ä¸€çœ¼é‚£æ£Ÿæ¼†é»‘çš„å¤§æ¨“ã€‚",
            "ã€Œçµ‚æ–¼å‡ºä¾†äº†...ã€",
            "ä½ çœ‹äº†çœ‹æ‰‹æ©Ÿä¸Šçš„æ™‚é–“ã€‚",
            "ã€Œè©²æ­»ï¼Œæ˜å¤©é‚„æ˜¯è¦ä¾†ä¸Šç­ã€‚ã€"
        ]
    },
    en: {
        title: "IOTA TRPG: Escape the Corporate Abyss",
        subtitle: "Infinite Overtime Simulator on IOTA Chain",
        recruit_btn: "+ Recruit Newbie",
        list_title: "ğŸ‘¥ Staff List",
        status_mad: "ğŸ’€ KIA (Overworked)",
        status_sane: "Sanity",
        
        demo_section: "ğŸ› ï¸ Demo / Stress Test",
        exploration_section: "ğŸ”¦ Exploration",
        career_end: "ğŸšª Career End",
        act_resign_btn: "ğŸ’” Submit Resignation (Burn NFT)",

        act_check: "ğŸ² Single Check",
        act_batch: "ğŸ”¥ Batch Check (x3)",
        act_quick: "âš¡ Quick Run",
        act_quick_desc: "Auto Play (Farming)",
        act_manual: "ğŸ–ï¸ Immersive",
        act_manual_desc: "Manual RP Mode",
        
        choice_run: "ğŸƒ Run (DEX)",
        choice_hide: "ğŸ«£ Hide (LUK)",
        choice_gaze: "ğŸ‘ï¸ Gaze (POW)",
        warn_loop: "âš ï¸ In the Loop... Choose wisely",
        history_title: "Adventure History",
        rank_title: "ğŸ† Leaderboard (Max Depth)",

        claim_btn: "Claim Salary",
        claim_error: "ğŸš« System Error: Corporate insolvency. Withdrawals suspended.",

        // ğŸ”¥ New: Certificate Texts
        cert_title: "Certificate of Release",
        cert_content: "This certifies that Staff",
        cert_content2: "has survived the infinite stairwell (barely).",
        cert_stat_depth: "Final Depth",
        cert_stat_mist: "Total MIST",
        cert_stamp: "APPROVED",
        cert_dept: "IOTA HR Dept.",
        cert_close: "Accept & Close",
        
        intro_lines: [
            "You are a poor corporate slave, working overtime late into the night...",
            "When you snap out of it, the power is out.",
            "The elevator is dead. You push open the heavy safety door to the stairwell.",
            "Empty condom wrappers are scattered in the corner.",
            "The dust is thick. You sneezeâ€”",
            "\"Achoo!\"",
            "...SLAM.",
            "The fire door behind you slams shut.",
            "It's too dark to find the handle.",
            "You have no choice but to go down.",
            "But an ominous feeling spreads in your heart like ink..."
        ],
        outro_madness: [
            "Your consciousness begins to fade...",
            "The walls of the stairwell start to writhe, turning into your boss's face.",
            "\"Remember to come in early for the meeting tomorrow...\"",
            "You stop thinking.",
            "You become part of the building's structure.",
            "Forever."
        ],
        outro_escaped: [
            "Fresh air!",
            "You push open the lobby door. The security guard looks at you in shock.",
            "The streetlights are dim, but real.",
            "You look back at the pitch-black building.",
            "\"Finally out...\"",
            "You check the time on your phone.",
            "\"Damn it. I still have to work tomorrow.\""
        ]
    }
};

// ğŸ”¥ ä¿®æ­£å¾Œçš„ Log æ˜ å°„è¡¨ (å®Œå…¨å°æ‡‰åˆç´„ V6.1 çš„å­—ä¸²)
const LOG_MAP: Record<string, string> = {
    // --- Demo / Resign (ä¾†è‡ª resign, sanity_check, batch_sanity_check) ---
    "Single Check Initiated...": "ğŸ² ä½ é­å—ä¸»ç®¡çš„å£“åŠ›æ¸¬è©¦...",
    "Failed! SAN damaged.": "âŒå®šå¤±æ•—ï¼ç†æ™ºå—æã€‚",
    "Passed! You remain calm.": "âœ… æª¢å®šé€šéï¼ä½ ä¿æŒäº†å†·éœã€‚",
    "BATCH CHECK (x3) START": "ğŸ”¥ ä½ é­å—ä¸»ç®¡çš„é«˜å¼·åº¦PUA...",
    "-[Fail] SAN -2": "âš ï¸ [å¤±æ•—] ç²¾ç¥å—å‰µ (SAN -2)",
    "-[Pass] Safe": "ğŸ›¡ï¸ [é€šé] å®‰å…¨éé—œ",
    "Result: MADNESS CONSUMED YOU.": "ğŸ’€ çµæœï¼šéå‹æ­»ã€‚ä½ æ’ä¸ä½äº†ã€‚",
    "Result: You survived the barrage.": "âœ¨ çµæœï¼šä½ æ’éäº†é€™æ³¢å°ˆæ¡ˆæ­»ç·šã€‚",
    "Resigned (SBT Minted)": "ğŸ“ é›¢è·æ‰‹çºŒå·²å®Œæˆ (ç²å¾—ç´€å¿µç«  SBT)",
    
    // --- Quick Mode (ä¾†è‡ª play_stairs_quick) ---
    "=== Quick Investigation ===": "ğŸ“œã€å¿«é€Ÿèª¿æŸ¥å ±å‘Šã€‘",
    "Exhaustion... Your mind crumbles from fatigue.": "ğŸ’¤ ç²¾ç¥è€—å¼±... ä½ çš„è‚åœ¨å“€è™Ÿï¼Œå¿ƒæ™ºå´©æ½°ã€‚",
    "> Rushed down successfully.": "ğŸƒ æˆåŠŸè¡ä¸‹æ¨“æ¢¯ã€‚",
    "> Stumbled! (-5 SAN)": "ğŸ¤• è·Œå€’äº†ï¼(SAN -5)",
    "Deeper... (Depth +1)": "â†˜ï¸ è¶Šä¾†è¶Šæ·±... (æ·±åº¦ +1)",
    
    // --- Manual Mode (ä¾†è‡ª manual_start, manual_resolve) ---
    // é€™è£¡å°±æ˜¯ä½ åŸæœ¬å°ä¸ä¸Šçš„åœ°æ–¹ï¼Œåˆç´„æŠŠå­—ä¸²ç¸®çŸ­äº†
    "You step into the stairwell...": "ğŸšª ä½ è¸å…¥äº†æ¨“æ¢¯é–“...",
    "The air changes. What do you do?": "ç©ºæ°£è®Šäº†ã€‚ä½ è¦åšä»€éº¼ï¼Ÿ",
    "Success. Deeper.": "âœ… æˆåŠŸã€‚ä½ å‰å¾€äº†ä¸‹ä¸€å±¤ã€‚",
    "FAILURE.": "âŒ å¤±æ•—ã€‚é»‘æš—åå™¬äº†ä½ ã€‚",
    
    // --- Visions (ä¾†è‡ª get_realm_vision) ---
    // åˆç´„ä¹Ÿç¸®çŸ­äº†é€™é‚Šçš„æè¿°
    "[Vision: Human Realm] Rust and dust.": "ğŸ‘ï¸ã€å¹»è¦ºã€‘å……æ»¿éµé½èˆ‡ç°å¡µçš„å‘³é“ã€‚",
    "[Vision: Deva Realm] Golden light.": "ğŸ‘ï¸ã€å¹»è¦ºã€‘è–å…‰ï¼è–å…‰é™è‡¨å•Šå•Šå•Š",
    "[Vision: Asura Realm] Walls bleeding.": "ğŸ‘ï¸ã€å¹»è¦ºã€‘ç‰†å£æ­£åœ¨æ»²è¡€ã€‚",
    "[Vision: Hungry Ghost Realm] Hands grabbing you.": "ğŸ‘ï¸ã€å¹»è¦ºã€‘ç„¡æ•¸éš»æ‰‹è©¦åœ–æŠ“ä½ä½ ã€‚",
    "[Vision: Hell Realm] Absolute void.": "ğŸ‘ï¸ã€å¹»è¦ºã€‘çµ•å°çš„è™›ç„¡ã€‚",
    

    // ğŸ”¥ğŸ”¥ğŸ”¥ æ–°å¢ï¼šå‰ç«¯æ¨¡æ“¬çš„é›¢è· Log (å°±æ˜¯ä½ å‰›å‰›çœ‹åˆ°çš„é‚£å¹¾å¥) ğŸ”¥ğŸ”¥ğŸ”¥
    "=== HR Department ===": "ğŸ¢ã€äººè³‡éƒ¨é–€é€šçŸ¥ã€‘",
    "Resignation letter received.": "âœ… å·²æ”¶åˆ°æ‚¨çš„é›¢è·ç”³è«‹æ›¸ã€‚",
    "NFT Access Card destroyed.": "ğŸ’³ å“¡å·¥è­˜åˆ¥è­‰ (NFT) å·²éŠ·æ¯€ã€‚",
    "You are free.": "ğŸ•Šï¸ ä½ è‡ªç”±äº†ã€‚(è¨˜å¾—ç¹³å›å…¬å¸ç­†é›»)",
    
};

const EMP_RULES = [
    "ã€å®ˆå‰‡ 4ã€‘è‹¥åœ¨èŒ¶æ°´é–“çœ‹è¦‹æ²’ç©¿åˆ¶æœçš„æ¸…æ½”å·¥ï¼Œè«‹ç«‹å³é–‰çœ¼å€’æ•¸åç§’ã€‚",
    "ã€å®ˆå‰‡ 12ã€‘æœ¬å…¬å¸ä¸æä¾›ç´…è‰²åŒ…è£çš„æ–¹ç³–ï¼Œè‹¥åœ¨èµ°å»Šçœ‹è¦‹è«‹å‹¿é£Ÿç”¨ã€‚",
    "ã€å®ˆå‰‡ 7ã€‘è½åˆ°è€é—†åœ¨èƒŒå¾Œå«ä½ çš„åå­—æ™‚ï¼Œåƒè¬ä¸è¦å›é ­ã€‚",
    "ã€å®ˆå‰‡ 9ã€‘è‹¥é›»æ¢¯é–€åœ¨æ·±å¤œè‡ªå‹•æ‰“é–‹ä¸”å…§éƒ¨ç„¡äººï¼Œè«‹å‹¿é€²å…¥ã€‚",
    "ã€å®ˆå‰‡ 2ã€‘åš´ç¦åœ¨æ·±å¤œæ’¥æ‰“åˆ†æ©Ÿè™Ÿç¢¼ã€Œ4444ã€ï¼Œå³ä¾¿é›»è©±éŸ¿èµ·ä¹Ÿä¸è¦æ¥è½ã€‚",
    "ã€å®ˆå‰‡ 15ã€‘å¦‚æœä½ ç™¼ç¾åŒäº‹çš„è‡‰è®Šæˆäº†æ¨¡ç³Šçš„é»‘å½±ï¼Œè«‹æ­£å¸¸èˆ‡å…¶äº¤è«‡ä¸¦å„˜é€Ÿé›¢é–‹ã€‚",
    "ã€ç³»çµ±è­¦å‘Šã€‘åµæ¸¬åˆ°æœªç¶“æˆæ¬Šçš„ç†æ™ºæ³¢å‹•ï¼Œè«‹å‰å¾€ HR éƒ¨é–€é ˜å–å®‰å®šåŠ‘ï¼ˆå·²éæœŸï¼‰ã€‚"
];



export const processLog = (text: string, lang: Lang): string => {
    if (!text) return "";
    
    if (lang === 'en') {
        return text
            .replace("=== Quick Investigation ===", "ğŸ“œ [Quick Report]")
            .replace("Escaped", "Escaped ğŸšª")
            .replace("Looping", "Looping ğŸ”„")
            .replace("MADNESS", "MENTAL BREAKDOWN ğŸ’€");
    }

    // 1. ç²¾ç¢ºæŸ¥è¡¨ (å„ªå…ˆ)
    if (LOG_MAP[text]) return LOG_MAP[text];

    // 2. æ¨¡ç³Š/è®Šæ•¸è™•ç†
    let t = text;
    
    // çµå±€è™•ç† (å› ç‚ºåˆç´„é€™äº›æ˜¯ hardcoded ä½†å¯èƒ½æœƒæ··åœ¨å…¶ä»– log è£¡)
    if (t.includes("Result: Mind Shattered")) return "ğŸ’€ çµæœï¼šå¿ƒæ™ºç ´ç¢ã€‚";
    if (t.includes("Result: You found the exit")) return "ğŸ‰ çµæœï¼šä½ æ‰¾åˆ°äº†å‡ºå£ï¼";
    if (t.includes("It was a trap.")) return "ğŸ”„ é‚£æ˜¯é™·é˜±ã€‚ä½ åˆå›åˆ°äº†åŸé»ã€‚";
    // ğŸšª è¦å‰‡æ€ªè«‡éš¨æ©Ÿæ¤å…¥ (20% æ©Ÿç‡)
    // åªæœ‰åœ¨ç‰¹å®šé—œéµèªå¥å‡ºç¾æ™‚æ‰è§¸ç™¼ï¼Œå¢åŠ çœŸå¯¦æ„Ÿ
    if (t.includes("Deeper") || t.includes("stairwell")) {
        if (Math.random() < 0.2) {
            const rule = EMP_RULES[Math.floor(Math.random() * EMP_RULES.length)];
            return `\nâš ï¸ ${rule}\n${t}`;
        }
    }
    
    // é€šç”¨æ›¿æ›
    t = t.replace("Escaped", "æ‰“å¡ä¸‹ç­")
         .replace("Looping", "ç„¡é™åŠ ç­")
         .replace("MADNESS", "éå‹æ­»(ç²¾ç¥å´©æ½°)")
         .replace("Staff #", "å“¡å·¥ç·¨è™Ÿ #");

    return t;
};