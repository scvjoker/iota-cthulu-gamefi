# ğŸ™ Cthulhu Mythos on IOTA: Fully On-Chain TRPG
## DEMO:ğŸ¢IOTA TRPG: Escape the Corporate Abyss (é€ƒé›¢è¡€æ±—è¾¦å…¬å¤§æ¨“)

![IOTA](https://img.shields.io/badge/IOTA-Testnet-lightgrey)
![Move](https://img.shields.io/badge/Smart_Contract-Move-blue)
![Next.js](https://img.shields.io/badge/Frontend-Next.js-black)
![License](https://img.shields.io/badge/License-MIT-green)

> A fully on-chain survival TRPG powered by **IOTA Move Rebased**. Will you escape the infinite overtime, or become part of the building structure forever?
>
> å…¨éˆä¸Šç”Ÿå­˜ TRPGã€‚åŸºæ–¼ IOTA æ™ºèƒ½åˆç´„çš„ç„¡é™åŠ ç­æ¨¡æ“¬å™¨ã€‚ä½ æœƒæˆåŠŸé€ƒè„«ï¼Œé‚„æ˜¯æ°¸é æˆç‚ºå¤§æ¨“çµæ§‹çš„ä¸€éƒ¨åˆ†ï¼Ÿ

---

## ğŸ“– Introduction (ä»‹ç´¹)

**Escape the Corporate Abyss** is a GameFi project built on the IOTA Rebased Testnet. It satirizes corporate culture using a horror TRPG narrative.

Unlike traditional web games, every decisionâ€”from "Rushing down stairs" to "Gazing into the Abyss"â€”is a **real blockchain transaction**. We utilize **IOTA's native `random` module** to ensure every fate is cryptographically fair, and **ScoreEvents** to permanently record the deepest depths reached by players on the chain.

æœ¬å°ˆæ¡ˆåˆ©ç”¨ IOTA çš„é«˜æ•ˆèƒ½èˆ‡éš¨æ©Ÿæ•¸æ¨¡çµ„ï¼Œæ‰“é€ äº†ä¸€å€‹ã€Œç¤¾ç•œé€ƒç”Ÿã€çš„ææ€–éŠæˆ²ã€‚æ¯ä¸€æ¬¡çš„æŠ‰æ“‡éƒ½æ˜¯ä¸€ç­†éˆä¸Šäº¤æ˜“ï¼Œä¸¦ä¸”æ‰€æœ‰ã€Œé¬¼æ‰“ç‰†ã€èˆ‡ã€Œç²¾ç¥å´©æ½°ã€çš„åˆ¤å®šçš†ç”±æ™ºèƒ½åˆç´„å…¬æ­£åŸ·è¡Œã€‚

## âœ¨ Key Features (ç‰¹è‰²)

### 1. ğŸŒ Bilingual & Cinematic Experience (æ²ˆæµ¸å¼é«”é©—)
- **Cinematic Intro/Outro:** Full-screen text animations set the horror tone upon minting a new character.
- **I18n Support:** One-click switch between **English** and **Traditional Chinese**.
- **Background Music:** Integrated ambient soundscapes (with browser auto-play workarounds).

### 2. ğŸ² Verifiable On-Chain Randomness (VRF)
We utilize the `0x8` Random module to determine:
- **Environment Generation:** Human Realm, Asura Realm, or Hell Realm (each with different stat modifiers).
- **Skill Checks:** STR (Constitution), DEX (Agility), and SAN (Willpower) checks are resolved atomically on-chain.

### 3. ğŸ† On-Chain Leaderboard (æ’è¡Œæ¦œ)
- **ScoreEvent:** When a player escapes or goes mad, the contract emits a `ScoreEvent`.
- **Global Ranking:** The frontend queries the blockchain history to display the **Top 10 players** who survived the deepest loops.

### 4. âš¡ Batch Transactions (PTB)
Leveraging IOTA's **Programmable Transaction Blocks (PTB)**:
- **"Madness Mode" (ç˜‹ç‹‚é€£ç™¼):** Players can execute 5 sequential skill checks in a **single atomic transaction** to speed up the farming process.

---

## ğŸ›  Tech Stack

- **Blockchain:** IOTA Rebased Testnet
- **Smart Contract:** Move (2024 beta edition)
- **Frontend:** Next.js 14, Tailwind CSS, Shadcn/ui, Lucide React
- **Client SDK:** `@iota/dapp-kit`, `@iota/iota-sdk`
- **Storage:** LocalStorage (History) + On-Chain Events (Leaderboard)

---

## ğŸš€ Getting Started

### Prerequisites
- [Bun](https://bun.sh/) (or Node.js)
- [IOTA CLI](https://docs.iota.org/) installed
- IOTA Wallet extension

### 1. Clone the Repository
```bash
git clone [https://github.com/scvjoker/iota-trpg-escape.git](https://github.com/scvjoker/iota-trpg-escape.git)
cd iota-trpg-escape

```

### 2. Deploy Smart Contract (Backend)

```bash
cd contracts/trpg_core
iota move build
iota client publish --gas-budget 500000000

```

> âš ï¸ **Important:** Copy the **Package ID** from the terminal output.

### 3. Configure Frontend

Open `client/src/utils/constants.ts` and paste your Package ID:

```typescript
// client/src/utils/constants.ts
export const PACKAGE_ID = "0xYOUR_PACKAGE_ID_HERE";
export const MODULE_NAME = "investigator";
export const RANDOM_OBJECT_ID = "0x8";

```

### 4. Run the Game

```bash
cd ../../client
bun install
bun dev

```

Open `http://localhost:3000`.

---

## ğŸ“œ Smart Contract Logic

The core loop logic handles the "Ghost in the Stairwell" (é¬¼æ‰“ç‰†) mechanic:

```rust
// contracts/trpg_core/sources/investigator.move

if (is_success) {
    // ... logic for escaping or finding clues ...
    if (item.loop_depth > 0) {
        // Emit ScoreEvent for Leaderboard
        event::emit(ScoreEvent { 
            name: item.name, 
            depth: item.loop_depth, 
            outcome: string::utf8(b"Escaped") 
        });
    }
} else {
    // Failure leads to deeper loops (é¬¼æ‰“ç‰†)
    item.loop_depth = item.loop_depth + 1;
    item.san = item.san - dmg;
    // ...
}

```

---

## ğŸ“¸ Screenshots

| **Recruitment (Mint)** | **Infinite Loop** | **Leaderboard** |

---

## ğŸ¤ Contributing

Built for the **IOTA Hackathon 2025**.

* **Developer:** [scvjoker]
* **License:** MIT
